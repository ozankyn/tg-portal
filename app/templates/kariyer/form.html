{% extends "basvuru/base_public.html" %}

{% block title %}Başvuru Formu - {{ kadro.pozisyon_adi }}{% endblock %}

{% block progress %}
<div class="flex items-center justify-center gap-2 py-4">
    <div class="flex items-center gap-2">
        <span class="w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center text-sm">
            <span class="material-symbols-outlined text-sm">check</span>
        </span>
        <span class="text-sm text-white/70">KVKK Onay</span>
    </div>
    <div class="w-8 h-0.5 bg-green-500"></div>
    {% if aday.telefon_dogrulandi %}
    <div class="flex items-center gap-2">
        <span class="w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center text-sm">
            <span class="material-symbols-outlined text-sm">check</span>
        </span>
        <span class="text-sm text-white/70">Telefon Doğrulama</span>
    </div>
    <div class="w-8 h-0.5 bg-green-500"></div>
    {% endif %}
    <div class="flex items-center gap-2">
        <span class="w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center text-sm font-medium">{{ 3 if aday.telefon_dogrulandi else 2 }}</span>
        <span class="text-sm font-medium text-white">Başvuru Formu</span>
    </div>
    <div class="w-8 h-0.5 bg-white/30"></div>
    <div class="flex items-center gap-2">
        <span class="w-8 h-8 rounded-full bg-white/30 text-white/70 flex items-center justify-center text-sm font-medium">{{ 4 if aday.telefon_dogrulandi else 3 }}</span>
        <span class="text-sm text-white/50">Tamamlandı</span>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="flex justify-center">
    <div class="w-full max-w-4xl">
        <div class="bg-white rounded-lg border border-gray-200 shadow-sm">
            <div class="px-6 py-4 bg-gradient-to-r from-slate-700 to-slate-800 rounded-t-lg text-center">
                <h4 class="text-lg font-semibold text-white flex items-center justify-center gap-2">
                    <span class="material-symbols-outlined">badge</span>
                    İş Başvuru Formu
                </h4>
                <p class="text-sm text-slate-300 mt-1">{{ kadro.proje.musteri.display_name }} - {{ kadro.pozisyon_adi }}</p>
            </div>
            <div class="p-6">
                <form method="POST" enctype="multipart/form-data">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    
                    <!-- 1. Kişisel Bilgiler -->
                    <h5 class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200">
                        <span class="material-symbols-outlined text-lg text-blue-600">person</span>
                        Kişisel Bilgiler
                    </h5>
                    <div class="grid grid-cols-1 md:grid-cols-12 gap-4 mb-6">
                        <div class="md:col-span-4">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ad <span class="text-red-500">*</span></label>
                            <input type="text" name="ad" required value="{{ aday.ad or '' }}"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="md:col-span-4">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Soyad <span class="text-red-500">*</span></label>
                            <input type="text" name="soyad" required value="{{ aday.soyad or '' }}"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="md:col-span-4">
                            <label class="block text-sm font-medium text-gray-700 mb-1">T.C. Kimlik No <span class="text-red-500">*</span></label>
                            <input type="text" name="tc_kimlik" required maxlength="11" pattern="[0-9]{11}"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="md:col-span-4">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Doğum Tarihi <span class="text-red-500">*</span></label>
                            <input type="date" name="dogum_tarihi" required
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="md:col-span-4">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Doğum Yeri</label>
                            <input type="text" name="dogum_yeri"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Cinsiyet <span class="text-red-500">*</span></label>
                            <select name="cinsiyet" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="">Seçiniz</option>
                                <option value="erkek">Erkek</option>
                                <option value="kadin">Kadın</option>
                            </select>
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Medeni Durum</label>
                            <select name="medeni_durum"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="">Seçiniz</option>
                                <option value="bekar">Bekâr</option>
                                <option value="evli">Evli</option>
                                <option value="bosanmis">Boşanmış</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- 2. İletişim Bilgileri -->
                    <h5 class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200">
                        <span class="material-symbols-outlined text-lg text-blue-600">call</span>
                        İletişim Bilgileri
                    </h5>
                    <div class="grid grid-cols-1 md:grid-cols-12 gap-4 mb-6">
                        <div class="md:col-span-4">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Cep Telefonu <span class="text-red-500">*</span></label>
                            {% if aday.telefon_dogrulandi %}
                            <input type="tel" name="telefon" readonly value="{{ aday.telefon }}"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-700 cursor-not-allowed">
                            <p class="text-xs text-emerald-600 mt-1 flex items-center gap-1">
                                <span class="material-symbols-outlined text-sm">verified</span>
                                Doğrulanmış numara
                            </p>
                            {% else %}
                            <input type="tel" name="telefon" required placeholder="05XX XXX XX XX" value="{{ aday.telefon or '' }}"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            {% endif %}
                        </div>
                        <div class="md:col-span-4">
                            <label class="block text-sm font-medium text-gray-700 mb-1">E-posta <span class="text-red-500">*</span></label>
                            <input type="email" name="email" required value="{{ aday.email or '' }}"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-1">İl <span class="text-red-500">*</span></label>
                            <input type="text" name="il" required
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-1">İlçe</label>
                            <input type="text" name="ilce"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="md:col-span-12">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Adres</label>
                            <textarea name="adres" rows="2"
                                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></textarea>
                        </div>
                    </div>
                    
                    <!-- 3. Eğitim Bilgileri -->
                    <h5 class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200">
                        <span class="material-symbols-outlined text-lg text-blue-600">school</span>
                        Eğitim Bilgileri
                    </h5>
                    <div class="grid grid-cols-1 md:grid-cols-12 gap-4 mb-6">
                        <div class="md:col-span-3">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Eğitim Durumu <span class="text-red-500">*</span></label>
                            <select name="egitim_durumu" required
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="">Seçiniz</option>
                                <option value="ilkokul">İlkokul</option>
                                <option value="ortaokul">Ortaokul</option>
                                <option value="lise">Lise</option>
                                <option value="onlisans">Ön Lisans</option>
                                <option value="lisans">Lisans</option>
                                <option value="yukseklisans">Yüksek Lisans</option>
                                <option value="doktora">Doktora</option>
                            </select>
                        </div>
                        <div class="md:col-span-5">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Okul Adı</label>
                            <input type="text" name="okul_adi"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="md:col-span-4">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Bölüm</label>
                            <input type="text" name="bolum"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                    
                    <!-- 4. Ehliyet Bilgileri -->
                    <h5 class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200">
                        <span class="material-symbols-outlined text-lg text-blue-600">directions_car</span>
                        Ehliyet Bilgileri
                    </h5>
                    <div class="grid grid-cols-1 md:grid-cols-12 gap-4 mb-6">
                        <div class="md:col-span-2 flex items-center">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="ehliyet_var" id="ehliyet_var"
                                       class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                <span class="text-sm text-gray-700">Ehliyetim Var</span>
                            </label>
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ehliyet Sınıfı</label>
                            <select name="ehliyet_sinifi"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="">Seçiniz</option>
                                <option value="A1">A1</option>
                                <option value="A2">A2</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                            </select>
                        </div>
                        <div class="md:col-span-3">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ehliyet Tarihi</label>
                            <input type="date" name="ehliyet_tarihi"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="md:col-span-2 flex items-center">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="src_belgesi" id="src_belgesi"
                                       class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                <span class="text-sm text-gray-700">SRC Belgem Var</span>
                            </label>
                        </div>
                        <div class="md:col-span-3 flex items-center">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="psikoteknik" id="psikoteknik"
                                       class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                <span class="text-sm text-gray-700">Psikoteknik Belgem Var</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- 5. İş Deneyimi -->
                    <h5 class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200">
                        <span class="material-symbols-outlined text-lg text-blue-600">work</span>
                        İş Deneyimi
                    </h5>
                    <div class="grid grid-cols-1 md:grid-cols-12 gap-4 mb-6">
                        <div class="md:col-span-3">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Toplam Tecrübe (Yıl)</label>
                            <input type="number" name="toplam_tecrube_yil" min="0" max="50" value="0"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="md:col-span-5">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Son İş Yeri</label>
                            <input type="text" name="son_is_yeri"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="md:col-span-4">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Son Pozisyon</label>
                            <input type="text" name="son_pozisyon"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="md:col-span-3">
                            <label class="block text-sm font-medium text-gray-700 mb-1">İşe Başlangıç</label>
                            <input type="date" name="son_is_baslangic"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="md:col-span-3">
                            <label class="block text-sm font-medium text-gray-700 mb-1">İşten Ayrılış</label>
                            <input type="date" name="son_is_bitis"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="md:col-span-6">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ayrılma Nedeni</label>
                            <input type="text" name="son_is_ayrilma_nedeni"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                    
                    <!-- 6. Ek Bilgiler -->
                    <h5 class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200">
                        <span class="material-symbols-outlined text-lg text-blue-600">info</span>
                        Ek Bilgiler
                    </h5>
                    <div class="grid grid-cols-1 md:grid-cols-12 gap-4 mb-6">
                        <div class="md:col-span-3">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Askerlik Durumu</label>
                            <select name="askerlik_durumu"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="">Seçiniz</option>
                                <option value="yapti">Yaptı</option>
                                <option value="muaf">Muaf</option>
                                <option value="tecilli">Tecilli</option>
                                <option value="yapmiyor">Yapmıyor (Kadın)</option>
                            </select>
                        </div>
                        <div class="md:col-span-3">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Beklenen Maaş (₺)</label>
                            <input type="number" name="beklenen_maas" min="0" step="1000"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div class="md:col-span-3">
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ne Zaman Başlayabilirsiniz?</label>
                            <select name="ne_zaman_baslayabilir"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="">Seçiniz</option>
                                <option value="hemen">Hemen</option>
                                <option value="1_hafta">1 Hafta İçinde</option>
                                <option value="2_hafta">2 Hafta İçinde</option>
                                <option value="1_ay">1 Ay İçinde</option>
                            </select>
                        </div>
                        <div class="md:col-span-3 flex items-center">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" name="vardiyali_calisabilir" id="vardiyali" checked
                                       class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                <span class="text-sm text-gray-700">Vardiyalı Çalışabilirim</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- 7. Belgeler -->
                    <h5 class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200">
                        <span class="material-symbols-outlined text-lg text-blue-600">upload_file</span>
                        Belgeler
                    </h5>
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4 flex items-center gap-2">
                        <span class="material-symbols-outlined text-blue-600">info</span>
                        <span class="text-sm text-blue-800">Lütfen belgelerin net ve okunabilir olduğundan emin olun. Maksimum dosya boyutu: 5MB</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Vesikalık Fotoğraf</label>
                            <input type="file" name="foto" accept="image/*"
                                   class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">CV (Özgeçmiş)</label>
                            <input type="file" name="cv_dosya" accept=".pdf,.doc,.docx"
                                   class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Kimlik Ön Yüz</label>
                            <input type="file" name="kimlik_on" accept="image/*"
                                   class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ehliyet Fotoğrafı</label>
                            <input type="file" name="ehliyet_foto" accept="image/*"
                                   class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Diploma</label>
                            <input type="file" name="diploma_foto" accept="image/*,.pdf"
                                   class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Adli Sicil Belgesi</label>
                            <input type="file" name="adli_sicil" accept="image/*,.pdf"
                                   class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                        </div>
                    </div>
                    
                    <!-- Gönder -->
                    <div class="space-y-3">
                        <button type="submit" class="w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white text-lg font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-lg">
                            <span class="material-symbols-outlined">send</span>
                            Başvuruyu Gönder
                        </button>
                        <p class="text-center text-sm text-gray-500 flex items-center justify-center gap-1">
                            <span class="material-symbols-outlined text-sm">verified_user</span>
                            Bilgileriniz KVKK kapsamında güvenle saklanmaktadır.
                        </p>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
